<div class="table-button-row">
  <a mat-flat-button color="primary" routerLink="/pedidos/Form" [queryParams]="{Id: 0}">Añadir nuevo pedido</a>  
</div>

<mat-form-field >
    <mat-label>Búsqueda</mat-label>
    <input matInput (keyup)="applyFilter($event)" placeholder="Dígite el texto a buscar" #input>
</mat-form-field>
  
<div class="mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8">
      
      <ng-container matColumnDef="NumPed">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Nº Pedido </th>
        <td mat-cell *matCellDef="let element"> {{element.NumPed}} </td>
      </ng-container>
      
      <ng-container matColumnDef="Estado">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Estado  </th>
        <td mat-cell *matCellDef="let element"
        [ngStyle]="{'color': element.Estado === 'Pendiente' ? 'red' : (element.Estado === 'Servido' ? 'green' : 'blue') }"
        > {{element.Estado}} </td>
      </ng-container>

      <ng-container matColumnDef="Serie">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Serie </th>
        <td mat-cell *matCellDef="let element"> {{element.Serie}} </td>
      </ng-container>
  
      <ng-container matColumnDef="Fecha">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha </th>
        <td mat-cell *matCellDef="let element"> {{element.Fecha | date:'dd/MM/yyyy'}} </td> 
      </ng-container>
  
      <ng-container matColumnDef="FechaEntrega">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Fecha de entrega </th>
        <td mat-cell *matCellDef="let element"> {{element.FechaEntrega | date:'dd/MM/yyyy h:mm a'}} </td>
      </ng-container>
  
      <ng-container matColumnDef="Comercial">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Comercial </th>
        <td mat-cell *matCellDef="let element"> {{element.Comercial}} </td>
      </ng-container>
  
      <ng-container matColumnDef="NombreCliente">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> NombreCliente </th>
        <td mat-cell *matCellDef="let element"> {{element.NombreCliente}} </td>
      </ng-container>
  
      <ng-container matColumnDef="DenominacionComercial">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Denominanción comercial </th>
        <td mat-cell *matCellDef="let element"> {{element.DenominacionComercial}} </td>
      </ng-container>
  
      <ng-container matColumnDef="Destino">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Destino  </th>
        <td mat-cell *matCellDef="let element"> {{element.Destino}} </td>
      </ng-container>

      <ng-container matColumnDef="Direccion">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Direccion </th>
        <td mat-cell *matCellDef="let element"> {{element.Direccion}} </td>
      </ng-container>
      
      <ng-container matColumnDef="Localidad">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Localidad  </th>
        <td mat-cell *matCellDef="let element"> {{element.Localidad}} </td>
      </ng-container>
      
      <ng-container matColumnDef="CodPostal">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Código postal  </th>
        <td mat-cell *matCellDef="let element"> {{element.CodPostal}} </td>
      </ng-container>
      
      <ng-container matColumnDef="Provincia">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Provincia  </th>
        <td mat-cell *matCellDef="let element"> {{element.Provincia}} </td>
      </ng-container>
      
      <ng-container matColumnDef="DescripcionFormaPago">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Forma de pago  </th>
        <td mat-cell *matCellDef="let element"> {{element.DescripcionFormaPago}} </td>
      </ng-container>
      
      <ng-container matColumnDef="DtoPP">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Dto. proto pago  </th>
        <td mat-cell *matCellDef="let element"> {{element.DtoPP}} </td>
      </ng-container>

      <ng-container matColumnDef="Total">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Total  </th>
        <td mat-cell *matCellDef="let element"> {{element.Total | currency:'EUR'}} </td>
      </ng-container>

      <ng-container matColumnDef="Observaciones">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Observaciones  </th>
        <td mat-cell *matCellDef="let element"> {{element.Observaciones}} </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Acciones</th>
        <td mat-cell *matCellDef="let element">
          <div class="table-button-row">
            <a mat-flat-button color="primary" routerLink="/pedidos/Form" [queryParams]="{Id: element.NumPed}">Ver</a>  
            
            <button mat-flat-button color="accent" (click)="onDelete(element)">Borrar</button>
          </div>
        </td>
      </ng-container>
    
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  
    <mat-paginator [pageSizeOptions]="[10, 25, 50, 100]" showFirstLastButtons></mat-paginator>
  </div>
